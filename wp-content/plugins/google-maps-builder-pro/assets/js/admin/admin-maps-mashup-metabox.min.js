var gmb_mashup_data;!function(e,t){"use strict";var o={};return o.cache=function(){o.$body=e("body")},o.init=function(){o.cache(),o.set_mashup_autocomplete(),o.set_toggle_fields(),e(".gmb-reset-autocomplete").on("click",o.reset_metabox)},o.set_mashup_autocomplete=function(){var t=e("#_gmb_mashup_autocomplete").get(0),o=new google.maps.places.Autocomplete(t);google.maps.event.addListener(o,"place_changed",function(){var t=o.getPlace();return t.geometry?(t.geometry&&(e("#_gmb_lat").val(t.geometry.location.lat()),e("#_gmb_lng").val(t.geometry.location.lng())),t.formatted_address&&e("#_gmb_address").val(t.formatted_address),t.place_id&&e("#_gmb_place_id").val(t.place_id),e(".search-autocomplete-set").val("1"),e(".gmb-toggle").show(),e(".autocomplete-wrap").hide(),void e(".gmb-autocomplete-notice").show()):(window.alert("Autocomplete's returned place contains no geometry"),!1)}),google.maps.event.addDomListener(t,"keydown",function(e){13==e.keyCode&&e.preventDefault()})},o.set_toggle_fields=function(){e(".gmb-toggle-fields").on("click",function(t){t.preventDefault(),e(".gmb-toggle").slideToggle(),e(this).find(".dashicons").toggleClass("dashicons-arrow-down"),e(this).find(".dashicons").toggleClass("dashicons-arrow-up")})},o.reset_metabox=function(){return e(".autocomplete-wrap").show(),e(this).parents(".gmb-autocomplete-notice").hide(),e(".search-autocomplete").val(" ").focus(),e(".search-autocomplete-set").val(""),e("#_gmb_lat").val(""),e("#_gmb_lng").val(""),e("#_gmb_address").val(""),e("#_gmb_place_id").val(""),!1},window.gm_authFailure=function(){e("#poststuff").before('<div class="notice gmb-notice-error error"><p>'+gmb_mashup_data.i18n.api_key_required+"</p></div>")},e(document).ready(o.init),t.GMB_Mashups_Metabox=o,o}(jQuery,window.MapsBuilderAdmin||(window.MapsBuilderAdmin={}));